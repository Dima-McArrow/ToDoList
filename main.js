console.log('ToDo list V 0.0.1');

class Task {
  constructor(name, description, priority, dueDate) {
    this.name = name;
    this.description = description;
    this.priority = priority;
    this.dueDate = dueDate;
  }
}

class ToDoList {
  constructor() {
    this.tasks = [];
  }

  addTask(task) {
    this.tasks.push(task);
  }

  removeTask(task) {
    this.tasks = this.tasks.filter(t => t !== task);
  }

  editTask(index, updatedTask) {
    this.tasks[index] = updatedTask;
  }

  getTasks() {
    return this.tasks;
  }
}

const toDoList = new ToDoList();

const myList = document.getElementById('list');

const myForm = document.getElementById('myForm');

function renderList() {
  myList.innerHTML = '';
  toDoList.getTasks().forEach((task, index) => {
    let taskPriority = '';
    if (task.priority === '1') {
      taskPriority = `<svg width="30px" height="30px" viewBox="0 0 1024 1024" class="icon"  version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M452.266667 955.733333l-384-384c-34.133333-34.133333-34.133333-87.466667 0-121.6l384-384c34.133333-34.133333 87.466667-34.133333 121.6 0l384 384c34.133333 34.133333 34.133333 87.466667 0 121.6l-384 384c-34.133333 34.133333-89.6 34.133333-121.6 0z" fill="#4CAF50" /><path d="M512 712.533333L362.666667 533.333333h298.666666z" fill="#FFEB3B" /><path d="M469.333333 315.733333h85.333334v262.4h-85.333334z" fill="#FFEB3B" /></svg>`;
    } else if (task.priority === '2') {
      taskPriority = `<svg width="30px" height="30px" viewBox="0 0 1024 1024" class="icon"  version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M452.266667 955.733333l-384-384c-34.133333-34.133333-34.133333-87.466667 0-121.6l384-384c34.133333-34.133333 87.466667-34.133333 121.6 0l384 384c34.133333 34.133333 34.133333 87.466667 0 121.6l-384 384c-34.133333 34.133333-89.6 34.133333-121.6 0z" fill="#FFC107" /><path d="M512 512m-42.666667 0a42.666667 42.666667 0 1 0 85.333334 0 42.666667 42.666667 0 1 0-85.333334 0Z" fill="#37474F" /><path d="M682.666667 512m-42.666667 0a42.666667 42.666667 0 1 0 85.333333 0 42.666667 42.666667 0 1 0-85.333333 0Z" fill="#37474F" /><path d="M341.333333 512m-42.666666 0a42.666667 42.666667 0 1 0 85.333333 0 42.666667 42.666667 0 1 0-85.333333 0Z" fill="#37474F" /></svg>`;
    } else {
      taskPriority = `<svg width="30px" height="30px" viewBox="0 0 1024 1024" class="icon"  version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M452.266667 955.733333l-384-384c-34.133333-34.133333-34.133333-87.466667 0-121.6l384-384c34.133333-34.133333 87.466667-34.133333 121.6 0l384 384c34.133333 34.133333 34.133333 87.466667 0 121.6l-384 384c-34.133333 34.133333-89.6 34.133333-121.6 0z" fill="#F44336" /><path d="M460.8 697.6c0-6.4 2.133333-12.8 4.266667-19.2 2.133333-6.4 6.4-10.666667 10.666666-14.933333 4.266667-4.266667 10.666667-8.533333 17.066667-10.666667s12.8-4.266667 21.333333-4.266667 14.933333 2.133333 21.333334 4.266667c6.4 2.133333 12.8 6.4 17.066666 10.666667 4.266667 4.266667 8.533333 8.533333 10.666667 14.933333 2.133333 6.4 4.266667 12.8 4.266667 19.2s-2.133333 12.8-4.266667 19.2-6.4 10.666667-10.666667 14.933333c-4.266667 4.266667-10.666667 8.533333-17.066666 10.666667-6.4 2.133333-12.8 4.266667-21.333334 4.266667s-14.933333-2.133333-21.333333-4.266667-10.666667-6.4-17.066667-10.666667c-4.266667-4.266667-8.533333-8.533333-10.666666-14.933333s-4.266667-10.666667-4.266667-19.2z m89.6-98.133333h-76.8L462.933333 277.333333h98.133334l-10.666667 322.133334z" fill="#FFFFFF" /></svg>`;
    }
    myList.innerHTML += `<div class="task">
      <h3>${task.name}</h3>
      <li>${task.description}</li>
      <li>${taskPriority}</li>
      <li>${task.dueDate}</li>
      <button class="remove" data-index="${index}"><svg height="30px" width="30px" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
	 viewBox="0 0 512 512" xml:space="preserve">
<path style="fill:#6C994E;" d="M312.548,117.691H199.456c-10.538,0-19.081-8.543-19.081-19.081V61.126
	c0-29.196,23.753-52.948,52.948-52.948h45.357c29.196,0,52.949,23.753,52.949,52.948v37.482
	C331.629,109.148,323.086,117.691,312.548,117.691z M218.538,79.528h74.929V61.126c0-8.153-6.633-14.785-14.786-14.785h-45.357
	c-8.153,0-14.785,6.633-14.785,14.785L218.538,79.528L218.538,79.528z"/>
<path style="fill:#7EB35B;" d="M342.616,78.062H169.388c-30.046,0-54.403,24.357-54.403,54.403v22.127H397.02v-22.127
	C397.019,102.418,372.662,78.062,342.616,78.062z"/>
<path style="opacity:0.1;enable-background:new    ;" d="M213.003,78.062h-43.615c-30.046,0-54.403,24.357-54.403,54.403v22.127
	H158.6v-22.127C158.6,102.418,182.957,78.062,213.003,78.062z"/>
<path style="fill:#7EB35B;" d="M102.367,163.644l27.729,303.559c1.895,20.741,19.287,36.618,40.115,36.618h171.582
	c20.827,0,38.221-15.877,40.115-36.618l27.729-303.559H102.367z"/>
<path style="opacity:0.1;enable-background:new    ;" d="M173.711,467.204l-27.729-303.559h-43.615l27.729,303.559
	c1.895,20.741,19.287,36.618,40.115,36.618h43.615C192.998,503.822,175.605,487.945,173.711,467.204z"/>
<path style="fill:#6C994E;" d="M397.019,123.917H114.985c-19.91,0-36.05,16.14-36.05,36.05v25.299h354.132v-25.299
	C433.068,140.056,416.929,123.917,397.019,123.917z"/>
<path style="opacity:0.1;enable-background:new    ;" d="M158.6,123.917h-43.615c-19.91,0-36.05,16.14-36.05,36.05v25.299h43.615
	v-25.299C122.551,140.056,138.69,123.917,158.6,123.917z"/>
<path d="M78.936,193.443h17.941l16.938,185.423c0.387,4.246,3.953,7.434,8.134,7.434c0.25,0,0.5-0.012,0.753-0.034
	c4.498-0.411,7.811-4.39,7.4-8.888l-16.801-183.936h213.767c4.516,0,8.178-3.661,8.178-8.178s-3.661-8.178-8.178-8.178H87.114
	v-17.121c0-15.369,12.503-27.872,27.872-27.872h0.674h47.961c4.516,0,8.178-3.661,8.178-8.178s-3.661-8.178-8.178-8.178h-37.362
	c6.724-17.549,23.581-29.5,43.131-29.5h173.228c19.549,0,36.407,11.95,43.131,29.5H196.331c-4.516,0-8.178,3.661-8.178,8.178
	s3.661,8.178,8.178,8.178h200.015h0.674c15.369,0,27.872,12.503,27.872,27.872v17.121h-65.112c-4.516,0-8.178,3.661-8.178,8.178
	s3.661,8.178,8.178,8.178h38.925L373.765,466.46c-1.52,16.638-15.265,29.184-31.972,29.184H170.21
	c-16.707,0-30.452-12.547-31.972-29.184l-5.15-56.37c-0.411-4.498-4.391-7.807-8.888-7.4c-4.498,0.411-7.811,4.39-7.4,8.888
	l5.15,56.371C124.245,493.061,144.991,512,170.209,512h171.582c25.218,0,45.964-18.939,48.259-44.052l25.075-274.505h17.941
	c4.516,0,8.178-3.661,8.178-8.178v-25.299c0-22.344-16.659-40.859-38.206-43.807c-7.236-27.172-31.674-46.276-60.424-46.276h-2.809
	v-8.758C339.805,27.421,312.384,0,278.678,0h-45.357c-33.705,0-61.126,27.421-61.126,61.126v8.758h-2.809
	c-28.75,0-53.188,19.104-60.424,46.276c-21.548,2.947-38.206,21.463-38.206,43.807v25.299
	C70.758,189.782,74.42,193.443,78.936,193.443z M285.289,69.884h-58.573v-8.758c0-3.644,2.965-6.608,6.608-6.608h45.357
	c3.644,0,6.609,2.964,6.609,6.608V69.884z M188.553,61.126c0-24.687,20.083-44.77,44.77-44.77h45.357
	c24.687,0,44.772,20.083,44.772,44.77v8.758h-21.807v-8.758c0-12.661-10.302-22.963-22.964-22.963h-45.357
	c-12.662,0-22.963,10.302-22.963,22.963v8.758h-21.807L188.553,61.126L188.553,61.126z"/>
</svg></button>
      <button class="edit" data-index="${index}"><svg version="1.1" id="Layer_2" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
	 viewBox="0 0 512 512" xml:space="preserve">
<path style="fill:#DCE5FA;" d="M354.051,8.414H61.167c-18.093,0-32.759,14.667-32.759,32.759v429.653
	c0,18.093,14.667,32.759,32.759,32.759h292.885c18.093,0,32.759-14.667,32.759-32.759V41.173
	C386.811,23.08,372.144,8.414,354.051,8.414z"/>
<path style="opacity:0.1;enable-background:new    ;" d="M386.811,104.541c-10.408,2.671-19.954,8.08-27.75,15.877L156.393,323.085
	l-4.583,144.975l144.976-4.58l90.025-90.024V104.541H386.811z"/>
<path style="fill:#FF999A;" d="M475.656,198.696l-54.479-54.479c-10.582-10.582-27.738-10.582-38.32,0l-30.269,30.268l25.777,67.022
	l67.022,25.777l30.269-30.269C486.239,226.434,486.239,209.277,475.656,198.696z"/>
<polygon style="fill:#FFEBBF;" points="186.581,433.292 189.61,337.464 218.416,308.657 311.216,401.456 282.409,430.263 "/>
<polygon style="fill:#FFD782;" points="282.409,430.263 189.61,337.464 313.464,213.609 378.367,241.507 406.264,306.408 "/>
<rect x="313.801" y="212.786" transform="matrix(-0.7071 -0.7071 0.7071 -0.7071 477.6891 678.7643)" style="fill:#515262;" width="131.24" height="55.328"/>
<path style="opacity:0.1;enable-background:new    ;" d="M475.656,198.696l-39.662-39.662c10.582,10.582,10.582,27.738,0,38.32
	L242.746,390.6l-54.872,1.734l-1.295,40.957l95.828-3.029l193.247-193.247C486.239,226.434,486.239,209.277,475.656,198.696z"/>
<path d="M427.136,138.267c-6.707-6.707-15.625-10.4-25.11-10.4c-2.306,0-4.578,0.222-6.794,0.65V41.173
	C395.232,18.47,376.762,0,354.06,0H134.375c-4.648,0-8.414,3.767-8.414,8.414s3.766,8.414,8.414,8.414H354.06
	c13.424,0,24.345,10.921,24.345,24.346v95.692c-0.009,0.008-0.018,0.017-0.027,0.026c-0.497,0.444-0.985,0.9-1.461,1.375
	c0,0-95.944,95.941-95.961,95.958c-3.245,3.245-3.242,8.657,0,11.898c3.19,3.192,8.635,3.265,11.899,0l20.617-20.616l80.9,80.9
	L282.417,418.363l-80.9-80.901l67.543-67.541c3.286-3.286,3.286-8.613,0-11.898c-3.286-3.286-8.612-3.286-11.899,0l-73.492,73.49
	c-0.036,0.036-0.067,0.076-0.102,0.112c-0.061,0.063-0.116,0.128-0.174,0.192c-1.29,1.424-2.071,3.304-2.167,5.223
	c-0.002,0.053-0.015,0.103-0.017,0.156l-3.029,95.828c-0.073,2.322,0.818,4.571,2.459,6.215c1.581,1.581,3.721,2.465,5.95,2.465
	c0.088,0,0.177-0.001,0.266-0.004l95.828-3.029c0.053-0.001,0.103-0.013,0.156-0.017c2-0.103,3.97-0.948,5.414-2.34
	c0.037-0.036,0.077-0.067,0.113-0.103l90.038-90.037v124.652c0,13.425-10.921,24.346-24.345,24.346h-60.687
	c-4.648,0-8.414,3.767-8.414,8.414c0,4.647,3.766,8.414,8.414,8.414h60.687c22.702,0,41.172-18.47,41.172-41.173V329.347
	l86.382-86.382c13.844-13.844,13.844-36.373,0-50.218L427.136,138.267z M195.282,424.599l2.131-67.442l57.847,57.847l7.462,7.462
	L195.282,424.599z M406.272,294.509l-80.9-80.9l27.224-27.224l80.901,80.9L406.272,294.509z M469.715,231.066l-24.319,24.319
	l-4.597-4.597l-76.303-76.303c0,0,24.312-24.312,24.321-24.321c3.488-3.488,8.278-5.471,13.208-5.471
	c4.99,0,9.681,1.943,13.209,5.472l54.479,54.479C476.999,211.93,476.999,223.782,469.715,231.066z"/>
<path d="M268.133,503.586c0-4.647-3.766-8.414-8.414-8.414H61.175c-13.425,0-24.346-10.921-24.346-24.346V41.173
	c0-13.425,10.921-24.346,24.346-24.346h39.545c4.648,0,8.414-3.767,8.414-8.414S105.368,0,100.721,0H61.175
	C38.473,0,20.002,18.47,20.002,41.173v429.654C20.002,493.53,38.473,512,61.175,512h198.543
	C264.366,512,268.133,508.233,268.133,503.586z"/>
</svg></button><hr />
    </div>`;
  });
}

myForm.addEventListener('submit', (e) => {
  e.preventDefault();

  const formData = new FormData(myForm);

  const task = new Task(
    formData.get('title'),
    formData.get('description'),
    formData.get('priority'),
    formData.get('dueDate')
  );

  toDoList.addTask(task);

  renderList();
});


myList.addEventListener('click', (e) => {
  const removeButton = e.target.closest('.remove');  // Check for the closest element with 'remove' class

  if (removeButton) {
    const index = removeButton.getAttribute('data-index');
    const taskToRemove = toDoList.getTasks()[index];
    toDoList.removeTask(taskToRemove);

    renderList();
  }

  const editButton = e.target.closest('.edit');

  if (editButton) {
    const index = editButton.getAttribute('data-index');
    const taskToEdit = toDoList.getTasks()[index];
    console.log(taskToEdit);

    const updatedTask = new Task(
      prompt('Enter new name', taskToEdit.name),
      prompt('Enter new description', taskToEdit.description),
      prompt('Enter new priority', taskToEdit.priority),
      prompt('Enter new due date', taskToEdit.dueDate)
    );

    toDoList.editTask(index, updatedTask);
    renderList();
  }
});

console.log(toDoList.getTasks())


console.log(myList.innerHTML);





